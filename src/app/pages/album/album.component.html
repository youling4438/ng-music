<div class="album-info">
	<div class="main" *ngIf="albumInfo">
		<div class="info">
			<div class="thumbnail">
				<img [src]="albumInfo.cover" [alt]="albumInfo.albumTitle" class="cover">
				<div class="back-cover"></div>
			</div>
			<div class="contents">
				<h1>
					<app-tag tagColor="#5fa8fc" class="tag">连载</app-tag>
					<span>{{albumInfo.albumTitle}}</span>
				</h1>
				<div class="record">
					<div class="rate">
						<div class="star-wrap">
							star|star
						</div>
						<span class="score">{{score}}分</span>
					</div>
					<div class="play-count">
						<i appIcon="headset" class="icon"></i>
						<span>{{ albumInfo.playCount | numberFormat }}</span>
					</div>
				</div>
				<div class="metas">
					<app-tag class="meta" *ngFor="let meta of albumInfo.metas">{{meta.metaDisplayName}}</app-tag>
				</div>
				<div class="actions">
					<button appBtn [btnCircle]="true" class="btn">
						<i appIcon="play1" class="icon"></i>
						播放全部
					</button>
				</div>
			</div>
		</div>
		<div class="intro">
			<article
				[appToggleMore]="360"
				[isFull]="moreStatus.full"
				[content]="albumInfo.detailRichIntro | safeContent"
				(domInitHeight)="articleHeight = $event"
				[innerHTML]="albumInfo.detailRichIntro | safeContent"
			></article>
			<div class="more-arrow" *ngIf="articleHeight > 360" (click)="toggleMoreStatus()">
				<div class="blur" [hidden]="moreStatus.full"></div>
				<span>{{moreStatus.label}}</span>
				<i [appIcon]="moreStatus.icon" class="icon"></i>
			</div>
		</div>
		<div class="playlist">
			<table>
				<thead>
				<tr>
					<th><label app-checkbox [ngModel]="isCheckedAll()" (ngModelChange)="checkAllChange($event)"></label></th>
					<th class="item-name">曲目</th>
					<th>播放量</th>
					<th>创建时间</th>
				</tr>
				</thead>
				<tbody>
				<tr *ngFor="let track of tracks; trackBy: trackByTracks">
					<td class="item-checkbox"><label app-checkbox [ngModel]="isChecked(track.trackId)" (ngModelChange)="checkedChange($event, track)"></label></td>
					<td class="item-name">
						<span class="prefix number">{{ track.index }}</span>
						<i appIcon="play1" class="prefix icon icon-play"></i>
						<!--						<i appIcon="pause" class="prefix icon icon-pause"></i>-->
						<div class="prefix icon icon-playing"><i></i><i></i><i></i><i></i></div>
						<span>{{ track.title }}</span>
					</td>
					<td>
						<i appIcon="headset" class="icon"></i>
						<span>{{ track.playCount | numberFormat }}万</span>
					</td>
					<td>{{ track.createDateFormat }}</td>
				</tr>
				<tr class="last"></tr>
				</tbody>
				<tfoot>
				<tr>
					<th><label app-checkbox [ngModel]="isCheckedAll()" (ngModelChange)="checkAllChange($event)"></label></th>
					<th class="item-name">
						<button appBtn [btnCircle]="true">播放选中歌曲</button>
						<button class="btn-add" appBtn [btnCircle]="true">添加到播放列表</button>
					</th>
				</tr>
				</tfoot>
			</table>
			<div class="page-wrap">
				<app-pagination
					class="page"
					[total]="total"
					[pageNum]="trackParams.pageNum"
					[pageSize]="trackParams.pageSize"
					(pageChanged)="changePage($event)">
				</app-pagination>
			</div>
		</div>
	</div>
	<div class="side">
		<ng-container *ngIf="anchor">
			<div class="card">
				<div class="card-head">
					<h3>专辑主播</h3>
				</div>
				<div class="card-body">
					<div class="anchor-info">
						<div class="anchor-head">
							<div class="photo">
								<img [src]="anchor.anchorCover" [alt]="anchor.anchorName"/>
							</div>
							<span class="name">{{ anchor.anchorName }}</span>
						</div>
						<ul class="anchor-stats">
							<li>曲目：{{ anchor.anchorTracksCount }}</li>
							<li>专辑：{{ anchor.anchorAlbumsCount }}</li>
							<li>粉丝：{{ anchor.anchorFansCount | numberFormat }}</li>
						</ul>
						<p class="anchor-intro">
							简介：
							{{ anchor.personalIntroduction }}
						</p>
					</div>
				</div>
			</div>
			<div class="card">
				<div class="card-head">
					<h3>TA的专辑</h3>
				</div>
				<div class="card-body">
					<div class="albums">
						<div class="album-item" [routerLink]="'../' + item.albumId"
							 *ngFor="let item of anchor.anchorAlbumList">
							<div class="thumbnail">
								<img [src]="item.cover" [alt]="item.albumTitle">
							</div>
							<div class="content">
								<div class="title">{{ item.albumTitle }}
								</div>
								<span class="count">
               						<i appIcon="headset" class="icon"></i>{{ item.playCount | numberFormat }}
								</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</ng-container>
		<div class="card">
			<div class="card-head">
				<h3>相关推荐</h3>
			</div>
			<div class="card-body">
				<div class="albums">
					<div class="album-item" [routerLink]="'../' + item.id" *ngFor="let item of relateAlbums">
						<div class="thumbnail">
							<img [src]="'//imagev2.xmcdn.com/' + item.coverPath" [alt]="item.title">
						</div>
						<div class="content">
							<div class="title">{{ item.title }}</div>
							<span class="count">
							   <i appIcon="headset" class="icon"></i>{{ item.playCount | numberFormat }}
							 </span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
